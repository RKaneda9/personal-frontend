!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("inferno"),require("inferno-component"),require("inferno-create-element")):"function"==typeof define&&define.amd?define(["inferno","inferno-component","inferno-create-element"],e):(t.Inferno=t.Inferno||{},t.Inferno.Router=e(t.Inferno,t.Inferno.Component,t.Inferno.createElement))}(this,function(t,e,r){"use strict";function n(e,r){var n=r.router,o=e.activeClassName,i=e.activeStyle,p=e.className,c=e.onClick,a=e.to,u={href:a};return p&&(u.className=p),n.location.pathname===a&&(o&&(u.className=(p?p+" ":"")+o),i&&(u.style=Object.assign({},e.style,i))),u.onclick=function(t){0!==t.button||t.ctrlKey||t.altKey||(t.preventDefault(),"function"==typeof c&&c(t),n.push(a,t.target.textContent))},t.createVNode(2,"a",u,e.children)}function o(e){return e.to="/",t.createVNode(8,n,e)}function i(t){return P(t)?t:t?[t]:t}function p(t){return"string"==typeof t}function c(t){return"string"!=typeof t?t:decodeURIComponent(t)}function a(t){return!t||!(P(t)?t:Object.keys(t)).length}function u(t){var e=[];return g(t,e),e}function s(t){return p(t)?t:t.pathname+t.search}function l(t){if(""===t)return{};for(var e=Object.create(null),r=t.split("&"),n=0;n<r.length;n++){var o=r[n],i=o.split("=").map(m),p=i[0],c=i[1];e[p]?(e[p]=P(e[p])?e[p]:[e[p]],e[p].push(c)):e[p]=c}return e}function f(t,e){return 0===t.indexOf(e)?t.substr(e.length):t}function h(t,e){var r={};for(var n in t)e.indexOf(n)<0&&(r[n]=t[n]);return r}function d(t,e){var r=t.props||V,n=e.props||V,o=y(n.path)-y(r.path);return o||(n.path&&r.path?n.path.length-r.path.length:0)}function m(t,e){return decodeURIComponent(0|e?t:t.replace("[]",""))}function v(t){return t.replace(/(^\/+|\/+$)/g,"")}function y(t){return void 0===t&&(t=""),(v(t).match(/\/+/g)||"").length}function g(t,e){for(var r=0;r<t.length;r++){var n=t[r];P(n)?g(n,e):e.push(n)}}function x(t,e){return e={exports:{}},t(e,e.exports),e.exports}function b(t,e){for(var r,n=[],o=0,i=0,p="",c=e&&e.delimiter||"/";null!=(r=Y.exec(t));){var a=r[0],u=r[1],s=r.index;if(p+=t.slice(i,s),i=s+a.length,u)p+=u[1];else{var l=t[i],f=r[2],h=r[3],d=r[4],m=r[5],v=r[6],y=r[7];p&&(n.push(p),p="");var g=null!=f&&null!=l&&l!==f,x="+"===v||"*"===v,b="?"===v||"*"===v,R=r[2]||c,j=d||m;n.push({name:h||o++,prefix:f||"",delimiter:R,optional:b,repeat:x,partial:g,asterisk:!!y,pattern:j?k(j):y?".*":"[^"+C(R)+"]+?"})}}return i<t.length&&(p+=t.substr(i)),p&&n.push(p),n}function R(t,e){return _(b(t,e))}function j(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function E(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function _(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var o="",i=r||{},p=n||{},c=p.pretty?j:encodeURIComponent,a=0;a<t.length;a++){var u=t[a];if("string"!=typeof u){var s,l=i[u.name];if(null==l){if(u.optional){u.partial&&(o+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(z(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(l)+"`");if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<l.length;f++){if(s=c(l[f]),!e[a].test(s))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(s)+"`");o+=(0===f?u.prefix:u.delimiter)+s}}else{if(s=u.asterisk?E(l):c(l),!e[a].test(s))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+s+'"');o+=u.prefix+s}}else o+=u}return o}}function C(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function k(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function w(t,e){return t.keys=e,t}function O(t){return t.sensitive?"":"i"}function I(t,e){var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return w(t,e)}function T(t,e,r){for(var n=[],o=0;o<t.length;o++)n.push(S(t[o],e,r).source);var i=new RegExp("(?:"+n.join("|")+")",O(r));return w(i,e)}function N(t,e,r){return A(b(t,r),e,r)}function A(t,e,r){z(e)||(r=e||r,e=[]),r=r||{};for(var n=r.strict,o=r.end!==!1,i="",p=0;p<t.length;p++){var c=t[p];if("string"==typeof c)i+=C(c);else{var a=C(c.prefix),u="(?:"+c.pattern+")";e.push(c),c.repeat&&(u+="(?:"+a+u+")*"),u=c.optional?c.partial?a+"("+u+")?":"(?:"+a+"("+u+"))?":a+"("+u+")",i+=u}}var s=C(r.delimiter||"/"),l=i.slice(-s.length)===s;return n||(i=(l?i.slice(0,-s.length):i)+"(?:"+s+"(?=$))?"),i+=o?"$":n&&l?"":"(?="+s+"|$)",w(new RegExp("^"+i,O(r)),e)}function S(t,e,r){return z(e)||(r=e||r,e=[]),r=r||{},t instanceof RegExp?I(t,e):z(t)?T(t,e,r):N(t,e,r)}function U(t,e){var r=s(e),n=$(i(t),r,"/");return n}function $(t,e,r,n){void 0===e&&(e="/"),void 0===r&&(r="/"),void 0===n&&(n=!1);var o=P(t)?u(t):i(t),p=e.split("?"),c=p[0];void 0===c&&(c="/");var s=p[1];void 0===s&&(s="");var h=l(s);o.sort(d);for(var m=0;m<o.length;m++){var v=o[m],y=v.props.from||v.props.path||"/",g=r+f(y,r).replace(/\/\//g,"/"),x=!v.props||a(v.props.children),b=L(x,g,c);if(b){var R=null;if(v.props.from&&(n=v.props.to),v.props&&v.props.children){var j=$(v.props.children,c,g,n);if(j){if(j.redirect)return{location:g,redirect:j.redirect};R=j.matched,Object.assign(h,j.matched.props.params)}else v.props.children=null}var E=q.cloneVNode(v,{params:Object.assign(h,b.params)},R);return{location:g,redirect:n,matched:E}}}}function L(t,e,r){var n=e+"|"+t,o=tt.get(n);if(!o){var i=[];o={pattern:Z(e,i,{end:t}),keys:i},tt.set(n,o)}var p=o.pattern.exec(r);if(!p)return null;for(var a=p[0],u=Object.create(null),s=1;s<p.length;s+=1)u[o.keys[s-1].name]=c(p[s]);return{path:""===a?"/":a,params:u}}function W(t){if(!t)throw new TypeError('Inferno: Error "inferno-router" requires a history prop passed');return{push:t.push,replace:t.replace,listen:t.listen,isActive:function(t){return L(!0,t,this.url)},get location(){return"blank"!==t.location.pathname?t.location:{pathname:"/",search:""}},get url(){return this.location.pathname+this.location.search}}}var q="default"in t?t.default:t;e="default"in e?e.default:e,r="default"in r?r.default:r;var P=Array.isArray,V=Object.create(null),F=function(t){function e(e,r){var n=this;t.call(this,e,r),this._onComponentResolved=function(t,e){n.setState({asyncComponent:e})},this.state={asyncComponent:null}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.componentWillMount=function(){var t=this,e=this.props,r=e.onEnter,n=this.context,o=n.router;r&&Promise.resolve().then(function(){r({props:t.props,router:o})});var i=this.props,p=i.getComponent;p&&Promise.resolve().then(function(){p({props:t.props,router:o},t._onComponentResolved)})},e.prototype.onLeave=function t(e){void 0===e&&(e=!1);var r=this.props,t=r.onLeave,n=this.context,o=n.router;t&&e&&t({props:this.props,router:o})},e.prototype.componentWillUnmount=function(){this.onLeave(!0)},e.prototype.componentWillReceiveProps=function(t){this.onLeave(this.props.path!==t.path)},e.prototype.render=function(t){var e=t.component,n=t.children,o=h(t,["component","children","path"]),i=this.state,p=i.asyncComponent,c=e||p;return c?r(c,o,n):null},e}(e),M=function(t){function e(e,r){t.call(this,e,r),e.path="/"}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(F),J=function(t){function e(e,r){t.call(this,e,r),e.to||(e.to="/")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(F),K=function(t){function e(e,r){t.call(this,e,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getChildContext=function(){return{router:this.props.router||{location:{pathname:this.props.location}}}},e.prototype.render=function(t){return t.matched},e}(e),D=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},z=D,B=S,G=b,H=R,Q=_,X=A,Y=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");B.parse=G,B.compile=H,B.tokensToFunction=Q,B.tokensToRegExp=X;var Z=x(function(t){var e=B;t.exports=e,t.exports.parse=e.parse,t.exports.compile=e.compile,t.exports.tokensToFunction=e.tokensToFunction,t.exports.tokensToRegExp=e.tokensToRegExp,t.exports.default=t.exports}),tt=new Map,et=function(e){function r(t,r){e.call(this,t,r),this.router=W(t.history),this.state={url:t.url||this.router.url}}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.componentWillMount=function(){var t=this;this.router&&(this.unlisten=this.router.listen(function(e){t.routeTo(e.pathname)}))},r.prototype.componentWillReceiveProps=function(t){this.setState({url:t.url})},r.prototype.componentWillUnmount=function(){this.unlisten&&this.unlisten()},r.prototype.routeTo=function(t){this.setState({url:t})},r.prototype.render=function(e){var r=this,n=U(e.children,this.state.url);return n.redirect?process.nextTick(function(){r.router.replace(n.redirect)}):t.createVNode(4,K,{location:this.state.url,router:this.router,matched:n.matched})},r}(e),rt={Route:F,IndexRoute:M,Redirect:J,IndexRedirect:J,Router:et,RouterContext:K,Link:n,IndexLink:o,match:U};return rt});
